<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Containerizing an Angular web application with Docker | Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Containerizing an Angular web application with Docker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Description of the project" />
<meta property="og:description" content="Description of the project" />
<link rel="canonical" href="https://javiervidrua.github.io/blog/jekyll/update/2021/09/25/Containerizing-an-Angular-web-application-with-Docker.html" />
<meta property="og:url" content="https://javiervidrua.github.io/blog/jekyll/update/2021/09/25/Containerizing-an-Angular-web-application-with-Docker.html" />
<meta property="og:site_name" content="Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-25T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Containerizing an Angular web application with Docker" />
<script type="application/ld+json">
{"headline":"Containerizing an Angular web application with Docker","dateModified":"2021-09-25T00:00:00+02:00","datePublished":"2021-09-25T00:00:00+02:00","@type":"BlogPosting","url":"https://javiervidrua.github.io/blog/jekyll/update/2021/09/25/Containerizing-an-Angular-web-application-with-Docker.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://javiervidrua.github.io/blog/jekyll/update/2021/09/25/Containerizing-an-Angular-web-application-with-Docker.html"},"description":"Description of the project","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://javiervidrua.github.io/blog/feed.xml" title="Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Containerizing an Angular web application with Docker</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-09-25T00:00:00+02:00" itemprop="datePublished">Sep 25, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="description-of-the-project">Description of the project</h2>

<p>Deploy an Angular web application in Docker. The Angular web application should be built with the Angular CLI tool and with Docker Compose.</p>

<h2 id="steps">Steps</h2>

<h3 id="install-dependencies">Install dependencies</h3>

<p>The first step is to install Docker, Docker Compose, Node.js, TypeScript and Angular in our system. To do so, run the following script (tested on a system running Ubuntu 20.04.3):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> https://get.docker.com <span class="nt">-o</span> get-docker.sh
<span class="nb">sudo </span>sh get-docker.sh
<span class="nb">sudo </span>curl <span class="nt">-L</span> <span class="s2">"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-s</span><span class="si">)</span><span class="s2">-</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span><span class="s2">"</span> <span class="nt">-o</span> /usr/local/bin/docker-compose
<span class="nb">sudo chmod</span> +x /usr/local/bin/docker-compose
<span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/local/bin/docker-compose /usr/bin/docker-compose
curl <span class="nt">-fsSL</span> https://deb.nodesource.com/setup_16.x | <span class="nb">sudo</span> <span class="nt">-E</span> bash -
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> nodejs
npm <span class="nb">install </span>typescript <span class="nt">-g</span>
npm <span class="nb">install</span> <span class="nt">-g</span> @angular/cli
</code></pre></div></div>

<h3 id="create-the-angular-web-application">Create the Angular web application</h3>

<p>To do so, we’ll use the CLI tool to create a new project and open the browser to the what we’re working with:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng new angular-application
ng serve <span class="nt">--open</span>
</code></pre></div></div>

<h3 id="create-the-dockerfile">Create the Dockerfile</h3>

<p>Now we need to create the Dockerfile. This file will tell Docker to copy the project to the Docker container, build it for production, and install Nginx so we can access the container through port 80.</p>

<p>Create the file Dockerfile:</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">###############################################################################</span>
<span class="c"># Stage 1: Compile and Build angular codebase</span>
<span class="c">###############################################################################</span>
<span class="c"># Use official node image as the base image</span>
<span class="k">FROM</span><span class="s"> node:latest as node</span>

<span class="c"># Set the working directory INSIDE OF THE DOCKER CONTAINER</span>
<span class="k">WORKDIR</span><span class="s"> /angular-application</span>

<span class="c"># Add the source code to app</span>
<span class="k">COPY</span><span class="s"> ./angular-application /angular-application</span>

<span class="c"># Install all the dependencies</span>
<span class="k">RUN </span>npm <span class="nb">install</span>

<span class="c"># Generate the build of the application</span>
<span class="k">RUN </span>npm run build <span class="nt">--prod</span>


<span class="c">###############################################################################</span>
<span class="c"># Stage 2: Serve app with nginx server</span>
<span class="c">###############################################################################</span>
<span class="c"># Use official nginx image as the base image</span>
<span class="k">FROM</span><span class="s"> nginx:latest</span>

<span class="c"># Copy the build output to replace the default nginx contents.</span>
<span class="k">COPY</span><span class="s"> --from=node /angular-application/dist/angular-application /usr/share/nginx/html</span>

<span class="c"># Expose port 80</span>
<span class="k">EXPOSE</span><span class="s"> 80</span>
</code></pre></div></div>

<h3 id="create-the-docker-image">Create the Docker image</h3>

<p>Now we need to create the Docker image, to see if everything works. To do so, run <code class="language-plaintext highlighter-rouge">docker image build .</code>.</p>

<p>You should see something like the following:</p>

<p><img src="/blog/images/dockerimagebuild.jpg" alt="DockerImageBuild" title="DockerImageBuild" /></p>

<h3 id="create-the-docker-compose-file">Create the Docker Compose file</h3>

<p>The next step is to create the Docker Compose file, that will allow us to manage the application and make it scalable and portable.</p>

<p>Create the file docker-compose.yml:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This file will use the Dockerfile to run a container with that image</span>

<span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.9"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="c1"># build: . will make Docker Compose run 'docker image build .'</span>
    <span class="c1"># https://stackoverflow.com/questions/29480099/whats-the-difference-between-docker-compose-vs-dockerfile</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">80:80"</span>
  <span class="c1"># If we wanted more services, we'll put them right here</span>
  <span class="c1">#redis:</span>
    <span class="c1">#image: "redis:alpine"</span>
</code></pre></div></div>

<p>Now we can run <code class="language-plaintext highlighter-rouge">docker-compose up</code> and if we go to <code class="language-plaintext highlighter-rouge">http://localhost:80</code> we’ll be able to see something like this:</p>

<p><img src="/blog/images/angulartemplate.jpg" alt="AngularTemplate" title="AngularTemplate" /></p>

<p>To run the service as a daemon, you can run <code class="language-plaintext highlighter-rouge">docker-compose up -d</code> where <em>-d</em> stands for <em>detached</em>.</p>

<p>To stop the execution, you can run <code class="language-plaintext highlighter-rouge">docker-compose stop</code> or press Ctrl+C if you didn’t start the service as a daemon.</p>

<h2 id="conclusion">Conclusion</h2>

<p>With Docker you can create safer and faster applications, and with Docker Compose you can define and run multi-container applications, making them scalable and portable.</p>

<p>You can check out the source code in my <a href="https://github.com/javiervidrua/angularindockerdeployment">GitHub</a>.</p>

  </div><a class="u-url" href="/blog/jekyll/update/2021/09/25/Containerizing-an-Angular-web-application-with-Docker.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blog</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/javiervidrua"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">javiervidrua</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
